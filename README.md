# HPC-Webinar

## Prerequisites

Before you start running any of the demo. You need to install mpich in your system.
```console
foo@bar:~$ sudo apt install mpich
```
### Things to Note

* These examples will work fine if you are running on single machine.
* For multiple machines, keep your host file updated.
* If your machines are not on the Intranet, /etc/hosts files needs to be modified, since MPI looks for the hostnames. For that, a sample script has been provided.
* MPI programs are hard to debug. Since, error can be generated by any one of the processes which makes it hard to track.
* Debuggers are available but are complicated to run. (I will attach a link if I will come accros a simple one)

## How to Compile

MPICH has its wrapper mpicc and mpicxx around certain set of compilers.

For C:
```console
foo@bar:~$ mpicc -o main.out src.c
```
Here, main.out is the output file and src.c is the source file.

For C++:
```console
foo@bar:~$ mpicxx -o main.out src.cpp
```
Here, main.out is the output file and src.cpp is the source file.


## How to Run

```console
foo@bar:~$ mpiexec -np 2 -ppn 1 -f hosts.txt ./main.out
```
-np -> Number of processes.
-ppn -> Process per node (optional)
-f -> host file containing hostnames or IP on which you want to run (by default it will run all the processes where it was executed)

**Note: If you are running on multiple hosts, you need to put your binary file in all nodes with same absolute path.**


## Program List

### 0. Hello World

Just a simple Hello World Program. Every process prints out its rank(Its a number given to each process) and the hostname its running on.

To get the total number of processes running in given communicator(default : all).
```cpp
MPI_Comm_size(
    MPI_Comm communicator,
    int* size)
```

To get the rank of the current process in the given communicator.
```cpp
MPI_Comm_rank(
    MPI_Comm communicator,
    int* rank)
```

To get the hostname/processor name where current process is running.
```cpp
MPI_Get_processor_name(
    char* name,
    int* name_length)
```

### 1. Send Receive

Note :  This program will only work with 2 processes.

This program demonstrate simple send recieve operation being performed between 2 processes.

Rank 0 will send 1 integer to Rank 1.
Rank 1 will print the received data.

Send function call:
```cpp
MPI_Send(
    void* data,             // Data that you want to send
    int count,              // Size of the array of data
    MPI_Datatype datatype,  // Data type of the array
    int destination,        // Rank of the Destination process
    int tag,                // Tag has to be matched with MPI_Recv
    MPI_Comm communicator)  // To which communicator both process belongs to
```

Receive Function call:
```cpp
MPI_Recv(
    void* data,             // Data that you want to send
    int count,              // Size of the array of data
    MPI_Datatype datatype,  // Data type of the array
    int source,             // Rank of the Source process
    int tag,                // Tag has to be matched with MPI_Recv
    MPI_Comm communicator,  // To which communicator both process belongs to
    MPI_Status* status)     // Gives the info about the recv data
```

### 2. Broadcast

This program make use of the MPI_Collective calls. This are the functions that are required to be called by all the members of the communicator.

MPI_Bcast Function call:
```cpp
MPI_Bcast(
    void* data,             // Data that you want to broadcast
    int count,              // Size of the array
    MPI_Datatype datatype,  // Data type of the array
    int root,               // Rank of the process whose data will be broadcasted
    MPI_Comm communicator)  // The group of process where data will be broadcasted
```

## Authors

* **Prashant Piprotar** - - [Prash+](https://github.com/prashplus)

Visit my [Blog](http://prashplus.blogspot.com) for more Tech Stuff
### http://www.prashplus.com